<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>2학년 과목 선택</title>
 <style>  
    /* --- 전역 기본 스타일 및 레이아웃 (style.css와 통일) --- */
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        /* 파란 계열 그라디언트 배경: 학교의 깔끔하고 희망찬 느낌을 줍니다. */
        background: linear-gradient(135deg, #e0f2f7, #c1e4f4); /* 밝은 파랑에서 중간 파랑으로 */
        font-family: 'Poppins', sans-serif; /* 가독성 좋은 Poppins 폰트 사용 */
        color: #333; /* 기본 글자색: 진한 회색 */
        display: flex;
        justify-content: center;
        align-items: center; /* 수직 중앙 정렬 */
        text-align: center; /* 중앙 정렬에 맞춰 기본값 설정 */
    }

    /* --- 컨테이너 스타일 (style.css와 통일) --- */
    .container {  
        background-color: #ffffff; /* 흰색 배경: 깔끔하고 정보가 잘 보이게 합니다. */
        border-radius: 16px; /* 둥근 모서리 */
        box-shadow: 0 8px 25px rgba(0,0,0,0.1); /* 부드러운 그림자 */
        width: 100%; /* 너비는 100%로 설정 */
        max-width: 600px; /* 최대 너비 지정 */
        padding: 40px 30px; /* 내부 여백 */
        box-sizing: border-box; /* 패딩 포함 너비 계산 */
        display: flex;
        flex-direction: column; /* 세로 방향 정렬 */
        align-items: center; /* 내부 요소 중앙 정렬 */
        border: 1px solid #e0e0e0; /* 연한 회색 테두리 추가 */
        gap: 20px; /* 요소들 간의 기본 간격 */
    }  

    /* --- 제목 (h1, h2) 스타일 (style.css와 통일) --- */
    h1 {  
        font-weight: 600; /* 굵기 */
        margin-bottom: 24px; /* 아래 여백 */
        font-size: 28px; /* 글자 크기 */
        color: #2c3e50; /* 진한 남색 계열: 학교의 권위와 신뢰를 나타냅니다. */
        letter-spacing: 0.03em; /* 자간 조절 */
        text-align: center; /* 중앙 정렬 */
    }  

    h2 { /* 기존 style.css의 section-title에 가까운 스타일 적용 */
        font-size: 22px;
        color: #34495e; /* 약간 연한 남색 */
        border-bottom: 2px solid #3498db; /* 파란색 밑줄 */
        padding-bottom: 8px; /* 밑줄과의 간격 */
        text-align: center; /* 과목 선택 섹션 제목은 중앙 정렬로 변경 */
        width: 100%; /* 너비 100% */
        box-sizing: border-box;
        font-weight: 600;
        margin-top: 25px; /* 상단 여백 추가 */
        margin-bottom: 15px; /* 하단 여백 추가 */
    }

    /* 각 과목 선택 섹션 */
    .subject-option {  
        width: 100%; /* 너비 100% */
        margin-bottom: 10px; /* 하단 여백 */
        text-align: left; /* 내부 요소 왼쪽 정렬 */
    }  

    /* --- 셀렉트 박스 스타일 (input과 유사하게 통일) --- */
    select {  
        width: 100%; /* 너비 100% */
        padding: 14px 18px; /* 내부 여백 (input과 유사하게) */
        margin-top: 8px; /* 상단 여백 */
        margin-bottom: 20px; /* 아래 여백 */
        font-size: 16px; /* 글자 크기 */
        font-weight: 400; /* 굵기 */
        border: 1.5px solid #dcdcdc; /* 연한 회색 테두리 */
        border-radius: 8px; /* 둥근 모서리 */
        transition: border-color 0.3s ease, box-shadow 0.3s ease; /* 부드러운 전환 효과 */
        box-sizing: border-box; /* 패딩 포함 너비 계산 */
        background-color: #f9f9f9; /* 연한 회색 배경 */
        -webkit-appearance: none; /* 기본 셀렉트 박스 스타일 제거 (크롬/사파리) */
        -moz-appearance: none; /* 기본 셀렉트 박스 스타일 제거 (파이어폭스) */
        appearance: none; /* 기본 셀렉트 박스 스타일 제거 */
        background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23333333%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13.2-5.4H18.4c-6.5%200-12.2%203.2-15.6%208.1-3.4%204.9-3.3%2011.6.4%2016.4l132.8%20132.8c4.2%204.2%2011%204.2%2015.2%200l132.8-132.8c3.7-4.7%203.8-11.4.4-16.3z%22%2F%3E%3C%2Fsvg%3E'); /* 사용자 정의 드롭다운 화살표 */
        background-repeat: no-repeat;
        background-position: right 15px center;
        background-size: 12px;
        padding-right: 40px; /* 화살표와 텍스트 겹침 방지 */
    }  

    select:focus {  
        border-color: #3498db; /* 파란색 테두리: 활성 상태를 나타냅니다. */
        outline: none; /* 기본 아웃라인 제거 */
        box-shadow: 0 0 10px rgba(52, 152, 219, 0.25); /* 파란색 그림자 */
        background-color: #ffffff; /* 흰색 배경 */
    }  

    /* --- 버튼 스타일 (style.css와 통일) --- */
    button {  
        width: 100%; /* 너비 100% */
        padding: 14px 0; /* 내부 여백 */
        background: #3498db; /* 파란색 배경: 주 작업 버튼 */
        color: white; /* 흰색 글자 */
        font-weight: 600; /* 굵기 */
        font-size: 16px; /* 글자 크기 */
        border: none; /* 테두리 없음 */
        border-radius: 10px; /* 둥근 모서리 */
        cursor: pointer; /* 마우스 오버 시 포인터 변경 */
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3); /* 파란색 그림자 */
        transition: background 0.3s ease, box-shadow 0.3s ease; /* 부드러운 전환 효과 */
        margin-top: 25px; /* 상단 여백 (조금 더 늘림) */
        user-select: none; /* 텍스트 선택 방지 */
        letter-spacing: 0.02em; /* 자간 조절 */
    }  

    button:hover {  
        background: #2980b9; /* 진한 파랑으로 변경: 호버 피드백 */
        box-shadow: 0 6px 18px rgba(41, 128, 185, 0.4);
    }  

    button:disabled {  
        background: #cccccc; /* 비활성화 시 배경색 */
        color: #999999; /* 비활성화 시 글자색 */
        cursor: not-allowed; /* 마우스 오버 시 커서 변경 */
        box-shadow: none; /* 비활성화 시 그림자 제거 */
    }  
  </style>  
</head>
<body>
  <div class="container">
    <h1>과목을 선택하세요</h1>

    <!-- A반 선택 -->
    <div id="A" class="subject-option">
      <h2>A반 선택 과목</h2>
      <select id="A-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="세계사">세계사</option>
        <option value="사회문제탐구(A1)">사회문제탐구(A1)</option>
        <option value="윤리와사상(A1)">윤리와 사상(A1)</option>
        <option value="윤리와사상(A2)">윤리와 사상(A2)</option>
        <option value="사회문제탐구(A2)">사회문제탐구(A2)</option>
        <option value="물리학">물리학</option>
        <option value="생명과학">생명과학</option>
        <option value="화학(A1)">화학(A1)</option>
        <option value="화학(A2)">화학(A2)</option>
        <option value="지구과학">지구과학</option>
      </select>
    </div>

    <!-- B반 선택 -->
    <div id="B" class="subject-option">
      <h2>B반 선택 과목</h2>
      <select id="B-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="사회문제탐구(B1)">사회문제탐구(B1)</option>
        <option value="정치와법">정치와 법</option>
        <option value="사회문제탐구(B2)">사회문제탐구(B2)</option>
        <option value="생명과학(B1)">생명과학(B1)</option>
        <option value="윤리와사상(B1)">윤리와 사상(B1)</option>
        <option value="윤리와사상(B2)">윤리와 사상(B2)</option>
        <option value="화학(B1)">화학(B1)</option>
        <option value="생명과학(B2)">생명과학(B2)</option>
        <option value="지구과학">지구과학</option>
        <option value="화학(B2)">화학(B2)</option>
      </select>
    </div>

    <!-- C반 선택 -->
    <div id="C" class="subject-option">
      <h2>C반 선택 과목</h2>
      <select id="C-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="물리학">물리학</option>
        <option value="세계사">세계사</option>
        <option value="정치와법">정치와 법</option>
        <option value="화학">화학</option>
        <option value="지구과학">지구과학</option>
        <option value="사회문제탐구">사회문제탐구</option>
        <option value="윤리와사상(C1)">윤리와 사상(C1)</option>
        <option value="윤리와사상(C2)">윤리와 사상(C2)</option>
        <option value="생명과학(C1)">생명과학(C1)</option>
        <option value="생명과학(C2)">생명과학(C2)</option>
      </select>
    </div>

    <!-- 선택 완료 버튼 -->
    <button id="selectBtn" onclick="saveSelection()" disabled>선택 완료</button>
  </div>

 <script>
  // 선택 버튼 활성화 조건: A, B, C 반의 과목이 모두 선택되어야 함
  function enableButton() {
    const A = document.getElementById("A-subjects").value;
    const B = document.getElementById("B-subjects").value;
    const C = document.getElementById("C-subjects").value;
    document.getElementById("selectBtn").disabled = !(A && B && C); // A, B, C가 모두 선택되었을 때만 버튼 활성화
  }

  // 과목이 변경될 때마다 버튼 활성화 체크
  document.getElementById("A-subjects").addEventListener("change", enableButton);
  document.getElementById("B-subjects").addEventListener("change", enableButton);
  document.getElementById("C-subjects").addEventListener("change", enableButton);

  // 선택 완료 버튼 클릭 시 선택된 과목 저장
  function saveSelection() {
    const A = document.getElementById("A-subjects").value;
    const B = document.getElementById("B-subjects").value;
    const C = document.getElementById("C-subjects").value;

    const selectedClass = localStorage.getItem('selectedClass');
    if (!selectedClass) {
      alert("먼저 반을 선택해주세요!");
      window.location.href = "select_class.html"; // 반 선택 페이지로 리디렉션
      return;
    }

    // --- 여기부터 localStorage 저장 방식 수정 ---
    // schedule.html의 timetable 2학년 데이터를 기반으로 A, B, C의 위치를 매핑합니다.
    // 이 매핑은 schedule.html에 정의된 2학년 시간표의 A, B, C 자리와 일치해야 합니다.
    // 만약 schedule.html의 2학년 시간표에서 A, B, C의 위치가 다르다면 이 부분을 수정해야 합니다.

    const subjectsToSave = {};

    // 2학년 1반 시간표 (예시: schedule.html의 2-1 시간표 구조 참조)
    // "월요일": ["자율", "영3", "A", "C", "수2", "수1", "문1"],
    // "화요일": ["수2", "영4", "수1", "일본", "일본", "B", "문2"],
    // "수요일": ["영2", "A", "미술", "수2", "C", "체육"],
    // "목요일": ["C", "B", "체육", "문3", "A", "영1"],
    // "금요일": ["B", "미술", "수1", "인공", "문4", "창체"]

    // schedule.html의 각 2학년 반 시간표에서 A, B, C가 들어갈 인덱스를 정확히 찾아야 합니다.
    // 현재 `schedule.html`의 2학년 시간표를 기준으로 매핑한 예시입니다.
    // 만약 2학년 다른 반의 A,B,C 위치가 다르다면, 해당 반에 대한 개별 처리가 필요합니다.
    // 여기서는 일단 모든 2학년 반이 A, B, C 과목을 같은 요일/교시 패턴으로 가진다고 가정합니다.

    // 월요일: A(2교시 인덱스), C(3교시 인덱스)
    // 화요일: B(5교시 인덱스)
    // 수요일: A(1교시 인덱스), C(4교시 인덱스)
    // 목요일: C(0교시 인덱스), B(1교시 인덱스), A(4교시 인덱스)
    // 금요일: B(0교시 인덱스)

    subjectsToSave['월요일'] = [];
    subjectsToSave['월요일'][2] = A; // 월요일 3교시
    subjectsToSave['월요일'][3] = C; // 월요일 4교시

    subjectsToSave['화요일'] = [];
    subjectsToSave['화요일'][5] = B; // 화요일 6교시

    subjectsToSave['수요일'] = [];
    subjectsToSave['수요일'][1] = A; // 수요일 2교시
    subjectsToSave['수요일'][4] = C; // 수요일 5교시

    subjectsToSave['목요일'] = [];
    subjectsToSave['목요일'][0] = C; // 목요일 1교시
    subjectsToSave['목요일'][1] = B; // 목요일 2교시
    subjectsToSave['목요일'][4] = A; // 목요일 5교시

    subjectsToSave['금요일'] = [];
    subjectsToSave['금요일'][0] = B; // 금요일 1교시


    // 기존 localStorage 데이터를 가져와 현재 반의 선택 과목만 업데이트
    let allSelectedSubjects = JSON.parse(localStorage.getItem('selectedSubjects') || '{}');
    allSelectedSubjects[selectedClass] = subjectsToSave;

    localStorage.setItem("selectedSubjects", JSON.stringify(allSelectedSubjects));
    // --- localStorage 저장 방식 수정 끝 ---

    alert('선택 완료!');
    window.location.href = "schedule.html"; // 시간표 페이지로 이동
  }
</script>
</body>
</html>
