<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>3학년 과목 선택</title>
  <style>  
    /* --- 전역 기본 스타일 및 레이아웃 (style.css와 통일) --- */
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        /* 파란 계열 그라디언트 배경: 학교의 깔끔하고 희망찬 느낌을 줍니다. */
        background: linear-gradient(135deg, #e0f2f7, #c1e4f4); /* 밝은 파랑에서 중간 파랑으로 */
        font-family: 'Poppins', sans-serif; /* 가독성 좋은 Poppins 폰트 사용 */
        color: #333; /* 기본 글자색: 진한 회색 */
        display: flex;
        justify-content: center;
        align-items: center; /* 수직 중앙 정렬 */
        text-align: center; /* 중앙 정렬에 맞춰 기본값 설정 */
    }

    /* --- 컨테이너 스타일 (style.css와 통일) --- */
    .container {  
        background-color: #ffffff; /* 흰색 배경: 깔끔하고 정보가 잘 보이게 합니다. */
        border-radius: 16px; /* 둥근 모서리 */
        box-shadow: 0 8px 25px rgba(0,0,0,0.1); /* 부드러운 그림자 */
        width: 100%; /* 너비는 100%로 설정 */
        max-width: 600px; /* 최대 너비 지정 */
        padding: 40px 30px; /* 내부 여백 */
        box-sizing: border-box; /* 패딩 포함 너비 계산 */
        display: flex;
        flex-direction: column; /* 세로 방향 정렬 */
        align-items: center; /* 내부 요소 중앙 정렬 */
        border: 1px solid #e0e0e0; /* 연한 회색 테두리 추가 */
        gap: 20px; /* 요소들 간의 기본 간격 */
    }  

    /* --- 제목 (h1, h2) 스타일 (style.css와 통일) --- */
    h1 {  
        font-weight: 600; /* 굵기 */
        margin-bottom: 24px; /* 아래 여백 */
        font-size: 28px; /* 글자 크기 */
        color: #2c3e50; /* 진한 남색 계열: 학교의 권위와 신뢰를 나타냅니다. */
        letter-spacing: 0.03em; /* 자간 조절 */
        text-align: center; /* 중앙 정렬 */
    }  

    h2 { /* 기존 style.css의 section-title에 가까운 스타일 적용 */
        font-size: 22px;
        color: #34495e; /* 약간 연한 남색 */
        border-bottom: 2px solid #3498db; /* 파란색 밑줄 */
        padding-bottom: 8px; /* 밑줄과의 간격 */
        text-align: center; /* 과목 선택 섹션 제목은 중앙 정렬로 변경 */
        width: 100%; /* 너비 100% */
        box-sizing: border-box;
        font-weight: 600;
        margin-top: 25px; /* 상단 여백 추가 */
        margin-bottom: 15px; /* 하단 여백 추가 */
    }

    /* 각 과목 선택 섹션 */
    .subject-option {  
        width: 100%; /* 너비 100% */
        margin-bottom: 10px; /* 하단 여백 */
        text-align: left; /* 내부 요소 왼쪽 정렬 */
    }  

    /* --- 셀렉트 박스 스타일 (input과 유사하게 통일) --- */
    select {  
        width: 100%; /* 너비 100% */
        padding: 14px 18px; /* 내부 여백 (input과 유사하게) */
        margin-top: 8px; /* 상단 여백 */
        margin-bottom: 20px; /* 아래 여백 */
        font-size: 16px; /* 글자 크기 */
        font-weight: 400; /* 굵기 */
        border: 1.5px solid #dcdcdc; /* 연한 회색 테두리 */
        border-radius: 8px; /* 둥근 모서리 */
        transition: border-color 0.3s ease, box-shadow 0.3s ease; /* 부드러운 전환 효과 */
        box-sizing: border-box; /* 패딩 포함 너비 계산 */
        background-color: #f9f9f9; /* 연한 회색 배경 */
        -webkit-appearance: none; /* 기본 셀렉트 박스 스타일 제거 (크롬/사파리) */
        -moz-appearance: none; /* 기본 셀렉트 박스 스타일 제거 (파이어폭스) */
        appearance: none; /* 기본 셀렉트 박스 스타일 제거 */
        background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23333333%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13.2-5.4H18.4c-6.5%200-12.2%203.2-15.6%208.1-3.4%204.9-3.3%2011.6.4%2016.4l132.8%20132.8c4.2%204.2%2011%204.2%2015.2%200l132.8-132.8c3.7-4.7%203.8-11.4.4-16.3z%22%2F%3E%3C%2Fsvg%3E'); /* 사용자 정의 드롭다운 화살표 */
        background-repeat: no-repeat;
        background-position: right 15px center;
        background-size: 12px;
        padding-right: 40px; /* 화살표와 텍스트 겹침 방지 */
    }  

    select:focus {  
        border-color: #3498db; /* 파란색 테두리: 활성 상태를 나타냅니다. */
        outline: none; /* 기본 아웃라인 제거 */
        box-shadow: 0 0 10px rgba(52, 152, 219, 0.25); /* 파란색 그림자 */
        background-color: #ffffff; /* 흰색 배경 */
    }  

    /* --- 버튼 스타일 (style.css와 통일) --- */
    button {  
        width: 100%; /* 너비 100% */
        padding: 14px 0; /* 내부 여백 */
        background: #3498db; /* 파란색 배경: 주 작업 버튼 */
        color: white; /* 흰색 글자 */
        font-weight: 600; /* 굵기 */
        font-size: 16px; /* 글자 크기 */
        border: none; /* 테두리 없음 */
        border-radius: 10px; /* 둥근 모서리 */
        cursor: pointer; /* 마우스 오버 시 포인터 변경 */
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3); /* 파란색 그림자 */
        transition: background 0.3s ease, box-shadow 0.3s ease; /* 부드러운 전환 효과 */
        margin-top: 25px; /* 상단 여백 (조금 더 늘림) */
        user-select: none; /* 텍스트 선택 방지 */
        letter-spacing: 0.02em; /* 자간 조절 */
    }  

    button:hover {  
        background: #2980b9; /* 진한 파랑으로 변경: 호버 피드백 */
        box-shadow: 0 6px 18px rgba(41, 128, 185, 0.4);
    }  

    button:disabled {  
        background: #cccccc; /* 비활성화 시 배경색 */
        color: #999999; /* 비활성화 시 글자색 */
        cursor: not-allowed; /* 마우스 오버 시 커서 변경 */
        box-shadow: none; /* 비활성화 시 그림자 제거 */
    }  
  </style> 
</head>
<body>
  <div class="container">
    <h1>과목을 선택하세요</h1>

    <!-- A반 선택 -->
    <div id="A" class="subject-option">
      <h2>A반 선택 과목</h2>
      <select id="A-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="생활과윤리(A1)">생활과 윤리(A1)</option>
        <option value="생활과윤리(A2)">생활과 윤리(A2)</option>
        <option value="생활과과학">생활과 과학</option>
        <option value="사회과제연구">사회과제연구</option>
        <option value="사회문화">사회문화</option>
        <option value="생명과학2">생명과학2</option>
        <option value="물리학2">물리학2</option>
        <option value="기하">기하</option>
        <option value="경제수학">경제수학</option>
        <option value="심화국어">심화국어</option>
      </select>
    </div>

    <!-- B반 선택 -->
    <div id="B" class="subject-option">
      <h2>B반 선택 과목</h2>
      <select id="B-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="심화국어">심화국어</option>
        <option value="생활과과학">생활과 과학</option>
        <option value="여행지리">여행지리</option>
        <option value="지구과학2">지구과학2</option>
        <option value="사회과제연구">사회과제연구</option>
        <option value="사회문화">사회문화</option>
        <option value="기하">기하</option>
        <option value="생명과학2">생명과학2</option>
        <option value="화학2">화학2</option>
        <option value="생활과윤리">생활과 윤리</option>
      </select>
    </div>

    <!-- C반 선택 -->
    <div id="C" class="subject-option">
      <h2>C반 선택 과목</h2>
      <select id="C-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="생명과학2">생명과학2</option>
        <option value="사회문화">사회문화</option>
        <option value="기하">기하</option>
        <option value="물리학2">물리학2</option>
        <option value="심화국어">심화국어</option>
        <option value="사회과제연구">사회과제연구</option>
        <option value="생활과윤리(C1)">생활과 윤리(C1)</option>
        <option value="생활과윤리(C2)">생활과 윤리(C2)</option>
        <option value="생활과과학">생활과 과학</option>
        <option value="여행지리">여행지리</option>
      </select>
    </div>

    <!-- D반 선택 -->
    <div id="D" class="subject-option">
      <h2>D반 선택 과목</h2>
      <select id="D-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="사회문화(D1)">사회문화(D1)</option>
        <option value="심화영어독해1">심화영어독해1</option>
        <option value="사회과제연구">사회과제연구</option>
        <option value="기하">기하</option>
        <option value="화학2">화학2</option>
        <option value="심화국어">심화국어</option>
        <option value="생명과학2">생명과학2</option>
        <option value="사회문화(D2)">사회문화(D2)</option>
        <option value="생활과윤리">생활과 윤리</option>
        <option value="생활과과학">생활과 과학</option>
      </select>
    </div>

    <!-- 선택 완료 버튼 -->
    <button id="selectBtn" onclick="saveSelection()" disabled>선택 완료</button>
  </div>

  <script>
  // 3학년 과목 선택 페이지이므로 D 과목까지 활성화 조건에 추가
  function enableButton() {
    const A = document.getElementById("A-subjects").value;
    const B = document.getElementById("B-subjects").value;
    const C = document.getElementById("C-subjects").value;
    const D = document.getElementById("D-subjects").value; // D 과목 추가
    document.getElementById("selectBtn").disabled = !(A && B && C && D); // 모든 과목이 선택되었을 때만 활성화
  }

  document.getElementById("A-subjects").addEventListener("change", enableButton);
  document.getElementById("B-subjects").addEventListener("change", enableButton);
  document.getElementById("C-subjects").addEventListener("change", enableButton);
  document.getElementById("D-subjects").addEventListener("change", enableButton); // D 과목 이벤트 리스너 추가


  function saveSelection() {
    const A = document.getElementById("A-subjects").value;
    const B = document.getElementById("B-subjects").value;
    const C = document.getElementById("C-subjects").value;
    const D = document.getElementById("D-subjects").value; // D 과목 추가

    const selectedClass = localStorage.getItem('selectedClass');
    if (!selectedClass) {
      alert("먼저 반을 선택해주세요!");
      window.location.href = "select_class.html"; // 반 선택 페이지로 리디렉션
      return;
    }

    // --- 여기부터 localStorage 저장 방식 수정 (3학년용) ---
    // schedule.html의 timetable 3학년 데이터를 기반으로 A, B, C, D의 위치를 매핑합니다.
    // 이 매핑은 schedule.html에 정의된 3학년 시간표의 A, B, C, D 자리와 일치해야 합니다.
    // 만약 schedule.html의 3학년 시간표에서 A, B, C, D의 위치가 다르다면 이 부분을 수정해야 합니다.

    const subjectsToSave = {};

    // 3학년 1반 시간표 (예시: schedule.html의 3-1 시간표 구조 참조)
    // "월요일": ["자율", "체육", "영4", "수탐", "보건", "D", "B"],
    // "화요일": ["영3", "A", "D", "보건", "C", "수탐"],
    // "수요일": ["B", "영1", "C", "언1", "언4", "진로"],
    // "목요일": ["영2", "수탐", "일본", "A", "언3", "C"],
    // "금요일": ["음악", "언2", "B", "D", "A"]

    // schedule.html의 각 3학년 반 시간표에서 A, B, C, D가 들어갈 인덱스를 정확히 찾아야 합니다.
    // 여기서는 일단 모든 3학년 반이 A, B, C, D 과목을 같은 요일/교시 패턴으로 가진다고 가정합니다.

    subjectsToSave['월요일'] = [];
    subjectsToSave['월요일'][5] = D; // 월요일 6교시
    subjectsToSave['월요일'][6] = B; // 월요일 7교시

    subjectsToSave['화요일'] = [];
    subjectsToSave['화요일'][1] = A; // 화요일 2교시
    subjectsToSave['화요일'][2] = D; // 화요일 3교시
    subjectsToSave['화요일'][4] = C; // 화요일 5교시

    subjectsToSave['수요일'] = [];
    subjectsToSave['수요일'][0] = B; // 수요일 1교시
    subjectsToSave['수요일'][2] = C; // 수요일 3교시

    subjectsToSave['목요일'] = [];
    subjectsToSave['목요일'][3] = A; // 목요일 4교시
    subjectsToSave['목요일'][5] = C; // 목요일 6교시

    subjectsToSave['금요일'] = [];
    subjectsToSave['금요일'][2] = B; // 금요일 3교시
    subjectsToSave['금요일'][3] = D; // 금요일 4교시
    subjectsToSave['금요일'][4] = A; // 금요일 5교시


    let allSelectedSubjects = JSON.parse(localStorage.getItem('selectedSubjects') || '{}');
    allSelectedSubjects[selectedClass] = subjectsToSave;

    localStorage.setItem("selectedSubjects", JSON.stringify(allSelectedSubjects));
    // --- localStorage 저장 방식 수정 끝 ---

    alert('선택 완료!');
    window.location.href = "schedule.html"; // 시간표 페이지로 이동
  }
</script>
</body>
</html>
