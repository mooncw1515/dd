<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>3학년 과목 선택</title>
  <style>
    /* 스타일은 기본적으로 선택창에 맞게 디자인 */
    body {
      font-family: 'Poppins', sans-serif;
      background: #f4f4f4;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 600px;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }
    .subject-option {
      margin-bottom: 10px;
    }
    select {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-top: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #0078d7;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 20px;
    }
    button:disabled {
      background: #ccc;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>과목을 선택하세요</h1>

    <!-- A반 선택 -->
    <div id="A" class="subject-option">
      <h2>A반 선택 과목</h2>
      <select id="A-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="생활과윤리(A1)">생활과 윤리(A1)</option>
        <option value="생활과윤리(A2)">생활과 윤리(A2)</option>
        <option value="생활과과학">생활과 과학</option>
        <option value="사회과제연구">사회과제연구</option>
        <option value="사회문화">사회문화</option>
        <option value="생명과학2">생명과학2</option>
        <option value="물리학2">물리학2</option>
        <option value="기하">기하</option>
        <option value="경제수학">경제수학</option>
        <option value="심화국어">심화국어</option>
      </select>
    </div>

    <!-- B반 선택 -->
    <div id="B" class="subject-option">
      <h2>B반 선택 과목</h2>
      <select id="B-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="심화국어">심화국어</option>
        <option value="생활과과학">생활과 과학</option>
        <option value="여행지리">여행지리</option>
        <option value="지구과학2">지구과학2</option>
        <option value="사회과제연구">사회과제연구</option>
        <option value="사회문화">사회문화</option>
        <option value="기하">기하</option>
        <option value="생명과학2">생명과학2</option>
        <option value="화학2">화학2</option>
        <option value="생활과윤리">생활과 윤리</option>
      </select>
    </div>

    <!-- C반 선택 -->
    <div id="C" class="subject-option">
      <h2>C반 선택 과목</h2>
      <select id="C-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="생명과학2">생명과학2</option>
        <option value="사회문화">사회문화</option>
        <option value="기하">기하</option>
        <option value="물리학2">물리학2</option>
        <option value="심화국어">심화국어</option>
        <option value="사회과제연구">사회과제연구</option>
        <option value="생활과윤리(C1)">생활과 윤리(C1)</option>
        <option value="생활과윤리(C2)">생활과 윤리(C2)</option>
        <option value="생활과과학">생활과 과학</option>
        <option value="여행지리">여행지리</option>
      </select>
    </div>

    <!-- D반 선택 -->
    <div id="D" class="subject-option">
      <h2>D반 선택 과목</h2>
      <select id="D-subjects">
        <option value="">과목을 선택하세요</option>
        <option value="사회문화(D1)">사회문화(D1)</option>
        <option value="심화영어독해1">심화영어독해1</option>
        <option value="사회과제연구">사회과제연구</option>
        <option value="기하">기하</option>
        <option value="화학2">화학2</option>
        <option value="심화국어">심화국어</option>
        <option value="생명과학2">생명과학2</option>
        <option value="사회문화(D2)">사회문화(D2)</option>
        <option value="생활과윤리">생활과 윤리</option>
        <option value="생활과과학">생활과 과학</option>
      </select>
    </div>

    <!-- 선택 완료 버튼 -->
    <button id="selectBtn" onclick="saveSelection()" disabled>선택 완료</button>
  </div>

  <script>
  // 3학년 과목 선택 페이지이므로 D 과목까지 활성화 조건에 추가
  function enableButton() {
    const A = document.getElementById("A-subjects").value;
    const B = document.getElementById("B-subjects").value;
    const C = document.getElementById("C-subjects").value;
    const D = document.getElementById("D-subjects").value; // D 과목 추가
    document.getElementById("selectBtn").disabled = !(A && B && C && D); // 모든 과목이 선택되었을 때만 활성화
  }

  document.getElementById("A-subjects").addEventListener("change", enableButton);
  document.getElementById("B-subjects").addEventListener("change", enableButton);
  document.getElementById("C-subjects").addEventListener("change", enableButton);
  document.getElementById("D-subjects").addEventListener("change", enableButton); // D 과목 이벤트 리스너 추가


  function saveSelection() {
    const A = document.getElementById("A-subjects").value;
    const B = document.getElementById("B-subjects").value;
    const C = document.getElementById("C-subjects").value;
    const D = document.getElementById("D-subjects").value; // D 과목 추가

    const selectedClass = localStorage.getItem('selectedClass');
    if (!selectedClass) {
      alert("먼저 반을 선택해주세요!");
      window.location.href = "select_class.html"; // 반 선택 페이지로 리디렉션
      return;
    }

    // --- 여기부터 localStorage 저장 방식 수정 (3학년용) ---
    // schedule.html의 timetable 3학년 데이터를 기반으로 A, B, C, D의 위치를 매핑합니다.
    // 이 매핑은 schedule.html에 정의된 3학년 시간표의 A, B, C, D 자리와 일치해야 합니다.
    // 만약 schedule.html의 3학년 시간표에서 A, B, C, D의 위치가 다르다면 이 부분을 수정해야 합니다.

    const subjectsToSave = {};

    // 3학년 1반 시간표 (예시: schedule.html의 3-1 시간표 구조 참조)
    // "월요일": ["자율", "체육", "영4", "수탐", "보건", "D", "B"],
    // "화요일": ["영3", "A", "D", "보건", "C", "수탐"],
    // "수요일": ["B", "영1", "C", "언1", "언4", "진로"],
    // "목요일": ["영2", "수탐", "일본", "A", "언3", "C"],
    // "금요일": ["음악", "언2", "B", "D", "A"]

    // schedule.html의 각 3학년 반 시간표에서 A, B, C, D가 들어갈 인덱스를 정확히 찾아야 합니다.
    // 여기서는 일단 모든 3학년 반이 A, B, C, D 과목을 같은 요일/교시 패턴으로 가진다고 가정합니다.

    subjectsToSave['월요일'] = [];
    subjectsToSave['월요일'][5] = D; // 월요일 6교시
    subjectsToSave['월요일'][6] = B; // 월요일 7교시

    subjectsToSave['화요일'] = [];
    subjectsToSave['화요일'][1] = A; // 화요일 2교시
    subjectsToSave['화요일'][2] = D; // 화요일 3교시
    subjectsToSave['화요일'][4] = C; // 화요일 5교시

    subjectsToSave['수요일'] = [];
    subjectsToSave['수요일'][0] = B; // 수요일 1교시
    subjectsToSave['수요일'][2] = C; // 수요일 3교시

    subjectsToSave['목요일'] = [];
    subjectsToSave['목요일'][3] = A; // 목요일 4교시
    subjectsToSave['목요일'][5] = C; // 목요일 6교시

    subjectsToSave['금요일'] = [];
    subjectsToSave['금요일'][2] = B; // 금요일 3교시
    subjectsToSave['금요일'][3] = D; // 금요일 4교시
    subjectsToSave['금요일'][4] = A; // 금요일 5교시


    let allSelectedSubjects = JSON.parse(localStorage.getItem('selectedSubjects') || '{}');
    allSelectedSubjects[selectedClass] = subjectsToSave;

    localStorage.setItem("selectedSubjects", JSON.stringify(allSelectedSubjects));
    // --- localStorage 저장 방식 수정 끝 ---

    alert('선택 완료!');
    window.location.href = "schedule.html"; // 시간표 페이지로 이동
  }
</script>
</body>
</html>
